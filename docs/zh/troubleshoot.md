# 故障排查

如果 Flarum 没有按照预期安装或工作，您首先应该 *再次检查* 您的服务器环境是否符合 [系统要求](install.md#server-requirements)。如果您缺少一些 Flarum 运行所需的东西，请先解决。

接下来，您应该花几分钟时间搜索 [支持论坛](https://discuss.flarum.org/t/support)和 [问题跟踪器](https://github.com/flarum/core/issues)。有可能已经有人报告了这个问题，并且已经有了解决办法。如果您已经彻底搜索过了，仍然找不到任何有关信息，那就可以开始排查故障了。

## 步骤 1：开启调试模式

在您继续前，您应当启用 Flarum 的调试工具。用文本编辑器打开 **config.php**，将 `debug` 的值改为 `true`，然后保存文件即可。这将使 Flarum 显示详细的错误信息，好让您了解发生了什么问题。

如果您一直看到空白页面，而上面的改动不起任何作用，请尝试将您的 **php.ini** 配置文件中的 `display_errors` 设置为 `On`。

## 步骤 2：重现问题

请尝试让问题再现。仔细注意当问题出现时，您在做什么。它是每次都会发生，还是只是偶尔发生？试着调整您认为可能影响问题出现的设置，或者改变您操作的顺序。它是否在某些情况下会发生，而在其他情况下不会发生。

如果您最近添加或更新了一个扩展程序，您应该暂时禁用它，然后看看问题是否会消失。请确保您所有的扩展都是兼容您正在运行的 Flarum 版本的。过时的扩展会导致各种各样的问题。

在这个过程中，您可能会发现是什么原因导致了您的问题，并想出办法解决它。即便您没有，您也可能会遇到一些有价值的线索，一旦您提交了错误报告，这些线索将帮助我们弄清楚发生了什么。

## 步骤 3：收集信息

如果您确实需要帮助以解决这个问题，那么请认真收集数据。请在以下地方寻找错误信息或其他与问题有关的信息：

* 显示在实际页面上的信息
* 显示在浏览器控制台中的信息（Chrome：更多工具 -> 开发者工具 -> Console)
* 记录在服务器错误日志中的信息（例如：`/var/log/nginx/error.log`）
* 记录在 PHP-FPM 错误日志中的信息（例如：`/var/log/php7.x-fpm.log`）
* 由 Flarum 记录的日志信息（`storage/logs/flarum.log`）

将所有信息复制到文本文件中，并做一些笔记，比如错误是 *何时* 发生的、当错误发生时您当时在 *做什么*。一定要包括任何您可能收集到的关于问题发生和不发生的条件。请尽可能多地添加有关您服务器环境的信息，如操作系统版本、Web 服务器版本、PHP 版本和处理程序等。

## 步骤 4：准备一份报告

一旦您竭尽所能收集了相关问题的几乎所有信息，您就可以提交错误报告了。提交时请遵循 [提交 Bug](bugs.md) 的有关说明。

如果您在提交报告后发现了相关问题的新信息，请您在您的原始报告底部添加该信息。即便您已经自行解决了问题，也最好提交一份报告，因为其他用户也可能因您的解决方案而受益。如果您已经找到了临时的解决办法，同样请务必提及。
